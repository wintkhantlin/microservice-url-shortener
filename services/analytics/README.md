# Analytics Service

This is the data cruncher. The **Analytics Service** sits quietly in the background, listening for events and turning raw data into actionable insights.

## What does it do?

1.  **Listens:** It acts as a **Kafka Consumer**, picking up "Click Events" generated by the Redirect Service.
2.  **Processes:** It validates and enriches the data (though most heavy lifting is done at query time).
3.  **Stores:** It dumps massive amounts of data into **ClickHouse**, a columnar database designed for exactly this kind of analytics.
4.  **Serves:** It provides an API endpoint that queries ClickHouse to give you stats like "How many people from France clicked this link on an iPhone?"

## Tech Stack

*   **Language:** Go (Golang) 1.25+
*   **Web Framework:** Gin
*   **Database:** ClickHouse (via native protocol)
*   **Messaging:** Kafka (Consumer)

## Running Locally

### Prerequisites

*   Go 1.25+
*   Docker & Docker Compose

### Using Docker (Recommended)

To build the image, you must run the command from the **project root directory**:

```bash
docker build -f services/analytics/Dockerfile -t url2short-analytics .
```

Or using Docker Compose:

```bash
docker-compose up --build analytics
```

### Manual Run

1.  **Get dependencies:**
    ```bash
    go mod download
    ```

2.  **Run the service:**
    ```bash
    go run main.go
    ```

Make sure ClickHouse and Kafka are running!
